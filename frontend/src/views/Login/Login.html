<section class="login">
  <v-layout justify-center>
    <v-flex md8>
      <v-card>
        <v-toolbar class="primary">
          <h1 class="headline white--text text-xs-center fw">
            Logging in
          </h1>
          <v-btn icon outlined color="white" @click.stop="dialog = true">?</v-btn>
        </v-toolbar>
        <v-form>
          <v-card-text>
            <v-layout v-if="loginTimeleft > 0" column align-center relative>
                <v-progress-circular :size="100" :width="15" color="accent" indeterminate v-if="!loggedIn">
                  <img :src='`/icons/${randomImageId}.png`' height="37" v-if="!isMobile && !loggedIn">
                </v-progress-circular>
                <v-progress-circular v-else :size="100" :width="0">
                  <v-icon color="accent" :size="75" class="animated fadeIn">done</v-icon>
                </v-progress-circular>
                <p class="subheading pt-3" v-if="!$route.params.again && !isMobile">Please enter your pincode or use
                  fingerprint and select this icon on your mobile phone.</p>
                <p class="subheading pt-3" v-if="!$route.params.again && isMobile">Please enter your pincode</p>
                <p class="subheading pt-3" v-if="$route.params.again && isMobile">Please enter your pincode again</p>
                <p class="subheading pt-3" v-if="$route.params.again && !isMobile">Please select the icon on your mobile
                  phone and enter your pincode again.</p>

                <p>Your login attempt is valid for another {{loginTimeleft}} seconds.</p>
              <v-layout column>
                <v-btn class="accent" @click="triggerResendNotification" v-if="!firstTime && !isMobile">
                  <v-icon left>
                    refresh
                  </v-icon>
                  Resend notification
                </v-btn>
                <v-btn class="accent" @click="openApp" v-if="isMobile">
                  Open 3Bot app
                </v-btn>
              </v-layout>
            </v-layout>
            <v-layout v-else>
              <b v-if="ref">This login attempt is no longer valid, please click <a :href="ref">here</a> to return.</b>
              <b v-else>This login attempt is no longer valid, please go back to the previous page.</b>
            </v-layout>
          </v-card-text>
        </v-form>
      </v-card>
    </v-flex>



    <v-dialog v-model="dialog" max-width="500">
      <v-card class="text-xs-center">
        <v-card-title class="headline"></v-card-title>
        <v-card-text class="subheading pt-3">You can login using the 3bot app. Download this app on the Google Play/
          Apple app store.</v-card-text>
        <v-layout justify-center>
          <div>
            <a md12 class="mx-2" href="https://play.google.com/store/apps/details?id=org.jimber.threebotlogin"
              target="_blank">
              <img src="googleplay.png" height="50" />
            </a>
            <a class="mx-2" href="https://itunes.apple.com/be/app/3bot-login/id1459845885?l=nl&mt=8" target="_blank">
              <img src="applestore.png" height="50" />
            </a>
          </div>
        </v-layout>
        <v-card-text class="subheading pt-3">Is your account not active on your phone? Click the recover button in the
          app. More info on how to recover your account can be found inside the 3Bot connect application.</v-card-text>
        <v-card-actions>
          <v-spacer></v-spacer>
          <v-btn color="primary darken-1" flat="flat" @click.native="dialog = false">Close</v-btn>
        </v-card-actions>
      </v-card>
    </v-dialog>
  </v-layout>
</section>